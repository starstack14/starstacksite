(function(){const t=document.documentElement,e=document.getElementById("themeToggle"),n=document.getElementById("navToggle"),o=document.getElementById("navMenu"),a=document.getElementById("year");a&&(a.textContent=String(new Date().getFullYear()));const r=localStorage.getItem("theme");r&&("dark"===r||"light"===r)?(t.setAttribute("data-theme",r),e&&e.setAttribute("aria-pressed",String("dark"===r))):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(t.setAttribute("data-theme","dark"),e&&e.setAttribute("aria-pressed","true"));e&&e.addEventListener("click",()=>{const n="dark"===t.getAttribute("data-theme")?"light":"dark";t.setAttribute("data-theme",n),localStorage.setItem("theme",n),e.setAttribute("aria-pressed",String("dark"===n))});n&&o&&(n.addEventListener("click",()=>{const t=o.classList.toggle("open");n.setAttribute("aria-expanded",String(t))}),o.addEventListener("click",t=>{const e=t.target;e&&e.matches("a")&&(o.classList.remove("open"),n.setAttribute("aria-expanded","false"))}));const i={ru:{"meta.title":"StarStack — Небольшой сайт","meta.404_title":"Страница не найдена — StarStack","common.brand":"StarStack","header.nav.home":"Главная","header.nav.about":"О сайте","header.nav.projects":"Проекты","header.nav.contact":"Контакты","hero.title":"Привет! Это StarStack","hero.subtitle":"Минимальный сайт, который легко разместить на GitHub Pages.","hero.cta":"Смотреть проекты","about.title":"О сайте","about.body":"Тут будут располагаться небольшие проекты, которые я делаю от скуки и не использую в коммерческих целях.","projects.title":"Проекты","projects.items.1.title":"Проект 2","projects.items.1.desc":"Короткое описание проекта.","projects.items.1.more":"Подробнее →","projects.mlf.desc":"Лаунчер для Factorio. Описание подгружается из GitHub.","projects.mlf.latest":"Последний релиз:","projects.mlf.no_release":"Релизов нет","projects.actions.github":"Открыть на GitHub →","projects.actions.download":"Скачать последний релиз →","contact.title":"Контакты","contact.body":"Чтобы связаться, используйте форму обращения в репозитории. Email не публикуется.","contact.cta":"Открыть форму обращения →","footer.made":"Сделано с любовью.","notfound.title":"Такой страницы нет","notfound.body":"Возможно, ссылка устарела или была удалена.","notfound.back":"Вернуться на главную"},en:{"meta.title":"StarStack — Minimal site","meta.404_title":"Page not found — StarStack","common.brand":"StarStack","header.nav.home":"Home","header.nav.about":"About","header.nav.projects":"Projects","header.nav.contact":"Contact","hero.title":"Hi! This is StarStack","hero.subtitle":"A minimal site that is easy to host on GitHub Pages.","hero.cta":"View projects","about.title":"About","about.body":"This section hosts small projects I build for fun and do not use for commercial purposes.","projects.title":"Projects","projects.items.1.title":"Project 2","projects.items.1.desc":"Short project description.","projects.items.1.more":"Learn more →","projects.mlf.desc":"Launcher for Factorio. Description is loaded from GitHub.","projects.mlf.latest":"Latest release:","projects.mlf.no_release":"No releases","projects.actions.github":"Open on GitHub →","projects.actions.download":"Download latest →","contact.title":"Contact","contact.body":"Use the repository issue form to get in touch. Email is not published.","contact.cta":"Open contact form →","footer.made":"Made with love.","notfound.title":"This page does not exist","notfound.body":"The link may be outdated or has been removed.","notfound.back":"Back to home"}};let s="en";function c(t){const e=document.getElementById("langRu"),n=document.getElementById("langEn");e&&n&&(e.setAttribute("aria-pressed",String("ru"===t)),n.setAttribute("aria-pressed",String("en"===t)))}function l(t){return i[s]&&i[s][t]||i.en[t]||t}function d(t){s=["ru","en"].includes(t)?t:"en";const e=i[s];document.querySelectorAll("[data-i18n]").forEach(t=>{const n=t.getAttribute("data-i18n"),o=e[n];"string"==typeof o&&(t.textContent=o)}),document.documentElement.lang=s;const n=document.getElementById("contactLink");if(n){const t="https://github.com/starstack14/starstacksite/issues/new?labels=contact&title=";n.href="en"===s?t+encodeURIComponent("Contact")+"&body="+encodeURIComponent("Describe your question and a contact for reply."):t+encodeURIComponent("Обращение")+"&body="+encodeURIComponent("Опишите ваш вопрос и контакт для обратной связи.")}c(s)}!function(){const t=localStorage.getItem("lang");let e=t||"en";["ru","en"].includes(e)||(e="en"),d(e);const n=document.getElementById("langRu"),o=document.getElementById("langEn");n&&n.addEventListener("click",()=>{localStorage.setItem("lang","ru"),d("ru")}),o&&o.addEventListener("click",()=>{localStorage.setItem("lang","en"),d("en")})}(),async function(){const t=document.getElementById("mlfTitle"),e=document.getElementById("mlfDesc"),n=document.getElementById("mlfStars"),o=document.getElementById("mlfRelease"),a=document.getElementById("mlfDownload"),r=document.querySelector(".mlf-skeleton"),i=document.querySelector(".mlf-content");if(!t&&!e&&!n&&!o&&!a)return;const s="starstack14/Multi-LauncherFactorio";function c(){r&&(r.style.display="none"),i&&(i.style.display="block",i.classList.add("fade-in"))}try{const t=await fetch(`https://api.github.com/repos/${s}`);if(t.ok){const o=await t.json();e&&o.description&&(e.textContent=o.description),n&&"number"==typeof o.stargazers_count&&(n.textContent=`★ ${o.stargazers_count}`),a&&o.html_url&&(a.href=o.html_url)}}catch{}try{const t=await fetch(`https://api.github.com/repos/${s}/releases/latest`);if(t.ok){const e=await t.json();o&&(o.textContent=`${l("projects.mlf.latest")} ${e.tag_name||e.name||""}`.trim()),a&&e.html_url&&(a.href=e.html_url)}else o&&(o.textContent=l("projects.mlf.no_release"))}catch{o&&(o.textContent=l("projects.mlf.no_release"))}setTimeout(c,800)}(),function(){const t=document.querySelector(".breadcrumbs");if(!t)return;const e=location.pathname,n=e.split("/").filter(t=>t),o=[{text:l("header.nav.home"),href:"/home",active:!1}];if("/"===e||"/home"===e||"/en/home"===e)o[0].active=!0;else{const t=e.startsWith("/en/");let a="";t&&(a="/en",o[0].href="/en/home"),n.forEach((e,r)=>{if(t&&0===r)return;const i=r===n.length-1;let s="";switch(e){case"about":s=l("header.nav.about");break;case"projects":s=l("header.nav.projects");break;case"contact":s=l("header.nav.contact");break;default:s=e}a+="/"+e,o.push({text:s,href:a,active:i})})}let a="";o.forEach((t,e)=>{e>0&&(a+='<span class="sep">›</span>'),a+=t.active?`<span class="current">${t.text}</span>`:`<a href="${t.href}">${t.text}</a>`}),t.innerHTML=a}(),function(){const t=document.querySelectorAll(".filter-btn"),e=document.getElementById("projectSearch"),n=document.querySelectorAll(".project-item"),o=document.getElementById("projectsGrid");if(!t.length||!n.length)return;let a="all",r="";function i(){const t=document.querySelector(".no-results");t&&t.remove();let e=0;n.forEach(t=>{const n=t.dataset.tags?t.dataset.tags.split(","):[],o=t.dataset.title||"",i=t.dataset.desc||"",s="all"===a||n.includes(a),c=""===r||o.toLowerCase().includes(r.toLowerCase())||i.toLowerCase().includes(r.toLowerCase()),l=s&&c;l?(t.classList.remove("hidden"),t.style.display="",e++):(t.classList.add("hidden"),setTimeout(()=>{t.style.display="none"},300))}),0===e&&o&&(o.insertAdjacentHTML("beforeend",'<div class="no-results">Проекты не найдены</div>'))}t.forEach(t=>{t.addEventListener("click",()=>{document.querySelector(".filter-btn.active")?.classList.remove("active"),t.classList.add("active"),a=t.dataset.filter||"all",i()})}),e&&e.addEventListener("input",t=>{r=t.target.value,i()}),i()}()})()